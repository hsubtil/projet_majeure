<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Connection Page</title>
</head>

<body>
    <h1>Node server test page</h1>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io.connect('http://localhost:1337');
        socket.on('connect_event', function (message) {
            socket.emit('data_comm', socket.id)
        })
        socket.on('node_error', function (data) {
            console.log("IN ERROR");
            alert("Error");
        })
        socket.on('request_profile_reply', function (data) {
            console.log(data);
        });
        socket.on('registration_success', function (data) {
            console.log(data);
        });

        function connectionAttempt() {
            console.log("IN");
            console.log(socket)
            var json_DATA = { 'email': "nabil.fekir@ol.com", 'password': "striker18" };
            socket.emit('auth_attempt', json_DATA);
        }
        function requestProfile() {
            // request_profile
            socket.emit('request_profile', {
                "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1YTNiY2FhYTExYmE5MTAwNWFlMTZhMzkiLCJlbWFpbCI6Im5hYmlsLmZla2lyQG9sLmNvbSIsIm5hbWUiOiJuYWJpbCIsInN1cm5hbWUiOiJmZWtpciIsImFkZHJlc3MiOiJBdmVudWUgZHUgc3RhZGUiLCJjcCI6IjY5MTEwIiwiY2l0eSI6IkRlY2luZXMiLCJjb3VudHJ5IjoiRnJhbmNlIiwiYmlydGhkYXkiOiIxOS0xMi0xOTkzIiwiaWF0IjoxNTE0MzkyODI4fQ.p3mOK9yNA4kwukTSKHP5bGnw2joUFQj_DhkefSRp3PI"
                , 'email': "nabil.fekir@ol.com"
            });

        }
        function requestFamilies() {
            // request_profile
            socket.emit('request_family', {
                "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1YTNiY2FhYTExYmE5MTAwNWFlMTZhMzkiLCJlbWFpbCI6Im5hYmlsLmZla2lyQG9sLmNvbSIsIm5hbWUiOiJuYWJpbCIsInN1cm5hbWUiOiJmZWtpciIsImFkZHJlc3MiOiJBdmVudWUgZHUgc3RhZGUiLCJjcCI6IjY5MTEwIiwiY2l0eSI6IkRlY2luZXMiLCJjb3VudHJ5IjoiRnJhbmNlIiwiYmlydGhkYXkiOiIxOS0xMi0xOTkzIiwiaWF0IjoxNTE0MzkyODI4fQ.p3mOK9yNA4kwukTSKHP5bGnw2joUFQj_DhkefSRp3PI"
                , 'email': "nabil.fekir@ol.com"
            });

        }
        function newUser() {
            socket.emit('sign_up_attempt', { 'email': "test.fekir@ol.com", 'name': "test", 'surname': "test", 'address': "Rue du stade", 'cp': "69110", 'city': "Decines", 'country': "France", 'birthday': "19-12-93" });
        }
    </script>
    <input type="button" value="connect" onclick="javascript:connectionAttempt()" />
    <input type="button" value="Request Profile" onclick="javascript:requestProfile()" />
    <input type="button" value="Request Families" onclick="javascript:requestFamilies()" />
    <input type="button" value="New user" onclick="javascript:newUser()" />


</body>
</html>